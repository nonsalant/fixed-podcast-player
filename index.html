<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 36 36%22><text y=%2232%22 font-size=%2232%22>üéß</text></svg>">
    <title>Fixed Podcast Player Demo</title>
    <meta name="description" content="Web Component for an audio player and a Play button. The player is revealed when the button is scrolled into view.">
    <!-- Demo Styles -->
    <style> :root { color-scheme: light dark; } body { padding: 1lh; background: light-dark(whitesmoke, #111); }
        main { max-width: 55rem; margin-inline: auto; font-family: system-ui; text-wrap: pretty; }
    </style>

    <!-- Podcast Player Assets (CSS, JS, SVG) -->
    <link rel="stylesheet" class="fpp" href="./assets/build/podcast-player.min.css">
    <script src="./assets/build/podcast-player.min.js" type="module"></script>
    <link rel="icon-sprite-sheet" class="fpp" href="./assets/icons.svg">

</head>
<body>
    
    <main>
        <h1>Fixed Podcast Player</h1>
        <p>
            <a href="https://github.com/nonsalant/fixed-podcast-player?tab=readme-ov-file#attributes-for-the-podcast-player-element">
            <strong>See the GitHub Readme</strong></a>
            for info on the Web Component's attributes and overriding the CSS variables.
        </p>
	    <h2>Web Component for a sticky audio player and its <em>Play</em> button</h2>
        <ul>
            <li>can be closed or moved to the top</li>
            <li>position, vloume, and playback speed are preserved in <code>localStorage</code></li>
            <li>styles are fully encapsulated using Declarative Shadow DOM</li>
        </ul>
        <p><b>Scroll down üëá</b></p>
    
        <!-- -->
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Laudantium explicabo voluptatem quos error itaque illum nihil, optio illo dicta maiores, deleniti nemo aperiam, doloribus nostrum quas reprehenderit exercitationem vitae esse.</p>
        <p>Atque voluptates optio eaque sed asperiores delectus corrupti voluptas architecto recusandae quis perspiciatis ratione dignissimos cum praesentium, placeat est ea pariatur. Odio aspernatur quas blanditiis quia repellendus voluptatem totam harum?</p>
        <p>Quas voluptatum beatae ullam nihil aspernatur debitis suscipit culpa sed molestias eius ipsum libero vitae incidunt consequatur architecto, fugit odio repudiandae rem? Libero, mollitia ipsam ducimus necessitatibus atque aliquam dicta.</p>
        <p>Quos quaerat, esse quo architecto atque quasi ut blanditiis inventore alias harum nobis provident, dolorum odio odit aliquid itaque doloremque perspiciatis numquam qui, quae eaque delectus fugit aperiam. Voluptate, quaerat.</p>
        <p>Eius amet, nulla, animi tenetur deleniti illum quod blanditiis iure repellat consectetur aperiam. Eligendi quos aperiam ex deleniti tenetur nulla molestiae magnam quasi fugit, voluptatem ut veritatis quia reiciendis mollitia!</p>
        <p>Ut quos commodi explicabo praesentium quaerat modi cumque facilis hic at quam sunt voluptatum ipsa corporis necessitatibus eius minus nostrum, aperiam atque nobis excepturi sapiente quae tenetur officiis dolorem? Illo.</p>
        <p>Iste atque tempora eligendi dicta commodi cum quis laboriosam aut culpa libero, debitis, doloremque laborum et excepturi mollitia optio tenetur nemo nulla quod! Ipsum repellat, provident earum beatae dolore assumenda.</p>
        <p>Adipisci culpa laudantium est nostrum reprehenderit quaerat, sed hic accusantium! Aliquam, ut! Aut a optio fugiat provident accusamus, illo quibusdam hic fuga cupiditate porro amet, error soluta, corrupti natus architecto!</p>
        <p>Temporibus possimus ipsa sit nihil sunt sint architecto placeat dolorum voluptates consequatur, dolore aperiam voluptatibus deserunt neque, aut eius laboriosam nulla et. Illum, facilis quasi omnis placeat quisquam necessitatibus quo.</p>
        <p>Cum dignissimos, modi explicabo repellat dolorum quam? Minima molestiae quae dolor doloribus asperiores non sint eum laudantium, fugit fuga vero provident commodi aliquam. Delectus, deserunt aliquid. Molestias ea repellat sapiente.</p>
        <p>Dolorum repellat eligendi praesentium quisquam dignissimos provident aliquid quis? Tenetur cumque quam dicta, exercitationem itaque odio! Consequuntur eligendi voluptatum inventore maiores aliquam cupiditate reiciendis quaerat atque similique, dignissimos nobis voluptatem.</p>
        <p>Sint vitae ipsa optio dolor nulla recusandae accusamus illum! Dolor in asperiores facere blanditiis obcaecati ad, laborum libero veritatis cupiditate pariatur delectus ducimus consectetur deleniti nostrum temporibus voluptatum beatae minus.</p>
        <p>Nostrum repudiandae at, recusandae neque voluptate explicabo saepe laudantium voluptatem aliquam excepturi blanditiis veniam atque quod iusto dolore debitis voluptates suscipit mollitia minus quidem obcaecati architecto facere. Nisi, laborum ab.</p>
        <!-- -->

        <!-- <podcast-player data-title="A closer look at ironweeds, or Vernonia, with Mt. Cuba&#39;s Sam Hoadley" data-src="https://robinhoodradioondemand.com/podcast-player/40848/ironweeds-with-sam-hoadley-a-way-to-garden-with-margaret-roach-feb-17-2025.mp3" data-thumb="https://awaytogarden.com/wp-content/uploads/2025/02/Fritillary-on-Vernonia-0A6A7837-1920x1012-1-240x180.jpg">
            <button class="show-and-play" type="button">Play</button>
        </podcast-player> -->

        <podcast-player data-title="A closer look at ironweeds, or Vernonia, with Mt. Cuba&#39;s Sam Hoadley" data-position="bottom" data-variation="floating" show-on="scroll" data-thumb="https://awaytogarden.com/wp-content/uploads/2025/02/Fritillary-on-Vernonia-0A6A7837-1920x1012-1-240x180.jpg">
            <a class="show-and-play" href="https://robinhoodradioondemand.com/podcast-player/40848/ironweeds-with-sam-hoadley-a-way-to-garden-with-margaret-roach-feb-17-2025.mp3">Play</a>
        </podcast-player>

        <!-- <podcast-player data-title="A closer look at ironweeds, or Vernonia, with Mt. Cuba&#39;s Sam Hoadley" data-thumb="https://awaytogarden.com/wp-content/uploads/2025/02/Fritillary-on-Vernonia-0A6A7837-1920x1012-1-240x180.jpg">
            <a class="show-and-play" href="https://robinhoodradioondemand.com/podcast-player/40848/ironweeds-with-sam-hoadley-a-way-to-garden-with-margaret-roach-feb-17-2025.mp3">
                <div icon-name="play-circle-solid">Play</div>
                <div icon-name="pause-circle">Pause</div>
                <div icon-name="play-circle">Resume</div>
            </a>
        </podcast-player> -->

        <style>
            fieldset#options {
                border-radius: 3px;
                display: grid;
                gap: 1lh;
                margin-block-start: 1lh;
                legend { font-weight: bold; padding-inline: .25lh; }
                accent-color: var(--pp-color);
            }
        </style>
        <fieldset id="options">
            <legend>‚öôÔ∏è Options</legend>
            
            <color-picker>
                <style>
                    /* color picker styles */
                    label:has(>#color-picker[type=color]) {display:flex; gap:.5lh; align-items:center; cursor:pointer; ul {margin:0; padding-inline-start:1lh;} }
                    #color-picker[type=color] {border-radius:50%; inline-size:2em; block-size:2em; cursor: pointer; padding:0px; border-width:3px; border-style:solid; border-color:rgb(220,220,220);}
                    #color-picker[type=color]::-webkit-color-swatch-wrapper {padding:0px;}
                    #color-picker[type=color]::-webkit-color-swatch {border-radius:50%;}
                    #color-picker[type=color]::-moz-color-swatch {border-radius:50%;}
                </style>
                <label for="color-picker">
                    <span>Base Color</span>
                    <input type="color" value="#426c8a" id="color-picker">
                    <output>
                        <ul>
                            <li>hue: 205deg</li>
                            <li>saturation: 35%</li>
                            <li>lightnes: 40%</li>
                        </ul>
                    </output>
                </label>
            </color-picker>
            <script type="module">
                class ColorPicker extends HTMLElement {
                    constructor() {
                        super();
                        this.defaultColor = this.getAttribute("default-color") ?? "#426c8a"; // darkblue
                        this.propName = "--pp-color";
                        this.hue = "--pp-hue";
                        this.sat = "--pp-sat";
                        this.lig = "--pp-lig";
                    }

                    connectedCallback() {
                        this.picker = this.querySelector("input[type=color]");

                        const initialColor = getProp(this.propName);
                        this.picker.value = initialColor.startsWith("#")
                            ? initialColor
                            : this.defaultColor;

                        this.setColor();
                        this.picker.addEventListener("input", this.handleColorPicker.bind(this));
                    }

                    handleColorPicker() {
                        this.setColor();
                    }

                    setColor() {
                        setProp(this.propName, this.picker.value);
                        const hsl = hexToHsl(this.picker.value);
                        setProp(this.hue, hsl.h + "deg");
                        setProp(this.sat, hsl.s + "%");
                        setProp(this.lig, hsl.l + "%");
                        // console.log(hsl);
                        this.querySelector("output").innerHTML = `
                        <ul>
                            <li>hue: ${hsl.h}deg</li>
                            <li>saturation: ${hsl.s}%</li>
                            <li>lightnes: ${hsl.l}%</li>
                        </ul>
                        `;
                    }
                }

                customElements.define("color-picker", ColorPicker);

                function setProp(propName, propValue) {
                    document.documentElement.style.setProperty(propName, propValue);
                }

                function getProp(propName) {
                    return getComputedStyle(document.documentElement)
                        .getPropertyValue(propName)
                        .trim();
                }

                function hexToHsl(hex) {
                    // Remove '#' if present
                    hex = hex.replace(/^#/, "");

                    let r = parseInt(hex.substring(0, 2), 16) / 255;
                    let g = parseInt(hex.substring(2, 4), 16) / 255;
                    let b = parseInt(hex.substring(4, 6), 16) / 255;

                    let max = Math.max(r, g, b),
                        min = Math.min(r, g, b);
                    let h,
                        s,
                        l = (max + min) / 2;

                    if (max === min) {
                        h = s = 0; // Grayscale
                    } else {
                        let d = max - min;
                        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

                        switch (max) {
                            case r:
                                h = (g - b) / d + (g < b ? 6 : 0);
                                break;
                            case g:
                                h = (b - r) / d + 2;
                                break;
                            case b:
                                h = (r - g) / d + 4;
                                break;
                        }

                        h = Math.round(h * 60);
                    }

                    return { h, s: Math.round(s * 100), l: Math.round(l * 100) };
                }

            </script>

            <label for="gradient-difference">
                <span>Gradient hue difference</span>
                <input type="range" id="gradient-difference" min="0" max="360" step="1" value="15"
                oninput="document.documentElement.style.setProperty('--pp-gradient-hue-difference', this.value + 'deg');
                this.nextElementSibling.innerText = this.value + 'deg';">
                <output>15deg</output>
            </label>

            <label for="content-width">
                <span>Player content width</span>
                <input type="range" id="content-width" min="0" max="100" step="1" value="40"
                oninput="document.documentElement.style.setProperty('--pp-content-width', this.value + 'rem');
                this.nextElementSibling.innerText = this.value + 'rem';">
                <output>40rem</output>
            </label>
        </fieldset>
    
        <p>Ea corrupti consectetur inventore quibusdam, quisquam odio dolore provident fuga quod odit voluptatibus itaque asperiores facere eos eveniet, facilis nisi quae cumque praesentium esse sunt, quia dolorum sint laborum. Id?</p>
        <p>Fuga libero minima minus necessitatibus, illo esse ad soluta distinctio officiis porro voluptatem consectetur recusandae deleniti eaque excepturi dicta quibusdam tempora cumque atque! Fugiat iusto officiis saepe nostrum soluta nesciunt.</p>
        <p>Tempore totam quo cupiditate, ratione delectus sit eligendi aliquid quidem, velit iste itaque pariatur eius nostrum a dolores culpa voluptatem, minus accusantium asperiores. At nam doloribus est molestiae, provident explicabo?</p>
        <p>Perspiciatis enim nostrum voluptatum consequatur, vitae earum itaque officiis dolores deleniti molestiae, id necessitatibus nam eius. Nostrum ratione incidunt, eaque provident accusamus earum, omnis velit similique nobis, eos vel nesciunt?</p>
        <p>Illo facere recusandae ducimus maxime! Molestias ducimus asperiores vitae officia iure beatae praesentium expedita dolor repellat nisi, quibusdam fugit odio, obcaecati accusamus perferendis quaerat sit, dicta neque modi voluptatem porro?</p>
        <p>Reprehenderit obcaecati vitae maxime illo in suscipit quo a molestiae veniam iusto eveniet temporibus, ullam nisi sit hic quas doloremque? Quam nam sed ab adipisci blanditiis perspiciatis fugiat beatae quod!</p>

        <hr>
        <p><a href="https://github.com/nonsalant/fixed-podcast-player/">View GitHub repo</a></p>
        <p><a href="https://codepen.io/nonsalant/pen/pvoyRmZ" target="_blank">View on CodePen</a></p>
    </main>
</body>
</html>